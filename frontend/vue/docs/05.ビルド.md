# ビルド

## 利用パッケージのライセンスリストファイル作成

```shell
npx license-checker --json > src/assets/node-js-licenses.json
```

## 開発とビルド時の切り替え

Vite で環境変数を使用できる。  
import.meta.env.PROD や import.meta.env.DEV で判断する  
https://v2--vitejs-docs-ja.netlify.app/guide/env-and-mode.html

## ビルド

### フロントエンド

VSCode のターミナルで下記実行

```shell
npm run build
```

dist フォルダができるので、それを backend/ にコピーする。  
※docker-compose.yaml でバインドしてある場合はコピー不要

### バックエンド

gin のリリースモードセット用のファイルを作成

http/release.go:

```go
//go:build release

package http

import "github.com/gin-gonic/gin"

func init() {
  gin.SetMode(gin.ReleaseMode)
}
```

ビルド

```
go build -o wslmanager.exe -tags=release
```

wslmanager.exe と dist フォルダをセットでコピーする
